vagrant@tfbuntu:~/GCP8-pet-lab/tfinfra$ terraform show
# google_compute_autoscaler.pc_mig_autoscaler:
resource "google_compute_autoscaler" "pc_mig_autoscaler" {
    creation_timestamp = "2024-10-22T08:16:15.405-07:00"
    description        = null
    id                 = "projects/az-537298/zones/us-central1-c/autoscalers/pc-mig-autoscaler"
    name               = "pc-mig-autoscaler"
    project            = "az-537298"
    self_link          = "https://www.googleapis.com/compute/v1/projects/az-537298/zones/us-central1-c/autoscalers/pc-mig-autoscaler"
    target             = "https://www.googleapis.com/compute/v1/projects/az-537298/zones/us-central1-c/instanceGroupManagers/pc-mig"
    zone               = "us-central1-c"

    autoscaling_policy {
        cooldown_period = 60
        max_replicas    = 4
        min_replicas    = 2
        mode            = "ON"

        cpu_utilization {
            predictive_method = "NONE"
            target            = 0.8
        }
    }
}

# google_compute_forwarding_rule.default:
resource "google_compute_forwarding_rule" "default" {
    all_ports               = true
    allow_global_access     = false
    allow_psc_global_access = false
    backend_service         = "https://www.googleapis.com/compute/v1/projects/az-537298/regions/us-central1/backendServices/petclinic-backend"
    base_forwarding_rule    = null
    creation_timestamp      = "2024-10-22T08:15:51.373-07:00"
    description             = null
    effective_labels        = {}
    forwarding_rule_id      = 2900209028023615304
    id                      = "projects/az-537298/regions/us-central1/forwardingRules/petclinic-forwarding-rule"
    ip_address              = "10.0.1.2"
    ip_protocol             = "TCP"
    ip_version              = null
    is_mirroring_collector  = false
    label_fingerprint       = "42WmSpB8rSM="
    labels                  = {}
    load_balancing_scheme   = "INTERNAL"
    name                    = "petclinic-forwarding-rule"
    network                 = "https://www.googleapis.com/compute/v1/projects/az-537298/global/networks/petclinic-vpc"
    network_tier            = "PREMIUM"
    port_range              = null
    ports                   = []
    project                 = "az-537298"
    psc_connection_id       = null
    psc_connection_status   = null
    recreate_closed_psc     = false
    region                  = "us-central1"
    self_link               = "https://www.googleapis.com/compute/v1/projects/az-537298/regions/us-central1/forwardingRules/petclinic-forwarding-rule"
    service_label           = null
    service_name            = null
    source_ip_ranges        = []
    subnetwork              = "https://www.googleapis.com/compute/v1/projects/az-537298/regions/us-central1/subnetworks/pc-subnet"
    target                  = null
    terraform_labels        = {}
}

# google_compute_health_check.petclinic_health_check:
resource "google_compute_health_check" "petclinic_health_check" {
    check_interval_sec  = 30
    creation_timestamp  = "2024-10-22T08:14:54.902-07:00"
    description         = null
    healthy_threshold   = 2
    id                  = "projects/az-537298/global/healthChecks/petclinic-health-check"
    name                = "petclinic-health-check"
    project             = "az-537298"
    self_link           = "https://www.googleapis.com/compute/v1/projects/az-537298/global/healthChecks/petclinic-health-check"
    source_regions      = []
    timeout_sec         = 10
    type                = "HTTP"
    unhealthy_threshold = 2

    http_health_check {
        host               = null
        port               = 8080
        port_name          = null
        port_specification = null
        proxy_header       = "NONE"
        request_path       = "/health"
        response           = null
    }

    log_config {
        enable = false
    }
}

# google_compute_instance_group_manager.pc_mig:
resource "google_compute_instance_group_manager" "pc_mig" {
    base_instance_name             = "petclinic-server"
    creation_timestamp             = "2024-10-22T08:15:08.528-07:00"
    description                    = null
    fingerprint                    = "UJiQdd9rU-E="
    id                             = "projects/az-537298/zones/us-central1-c/instanceGroupManagers/pc-mig"
    instance_group                 = "https://www.googleapis.com/compute/v1/projects/az-537298/zones/us-central1-c/instanceGroups/pc-mig"
    list_managed_instances_results = "PAGELESS"
    name                           = "pc-mig"
    project                        = "az-537298"
    self_link                      = "https://www.googleapis.com/compute/v1/projects/az-537298/zones/us-central1-c/instanceGroupManagers/pc-mig"
    status                         = [
        {
            all_instances_config = [
                {
                    current_revision = null
                    effective        = true
                },
            ]
            is_stable            = false
            stateful             = [
                {
                    has_stateful_config  = false
                    per_instance_configs = [
                        {
                            all_effective = true
                        },
                    ]
                },
            ]
            version_target       = [
                {
                    is_reached = true
                },
            ]
        },
    ]
    target_pools                   = [
        "https://www.googleapis.com/compute/v1/projects/az-537298/regions/us-central1/targetPools/petclinic-pool",
    ]
    target_size                    = 2
    wait_for_instances             = false
    wait_for_instances_status      = "STABLE"
    zone                           = "us-central1-c"

    auto_healing_policies {
        health_check      = "https://www.googleapis.com/compute/v1/projects/az-537298/global/healthChecks/petclinic-health-check"
        initial_delay_sec = 60
    }

    instance_lifecycle_policy {
        default_action_on_failure = "REPAIR"
        force_update_on_repair    = "NO"
    }

    update_policy {
        max_surge_fixed                = 0
        max_surge_percent              = 0
        max_unavailable_fixed          = 1
        max_unavailable_percent        = 0
        minimal_action                 = "RESTART"
        most_disruptive_allowed_action = null
        replacement_method             = "SUBSTITUTE"
        type                           = "PROACTIVE"
    }

    version {
        instance_template = "https://www.googleapis.com/compute/v1/projects/az-537298/regions/us-central1/instanceTemplates/petclinic-template"
        name              = "petclinic-serverv"
    }
}

# google_compute_network.vpc:
resource "google_compute_network" "vpc" {
    auto_create_subnetworks                   = false
    delete_default_routes_on_create           = false
    description                               = null
    enable_ula_internal_ipv6                  = false
    gateway_ipv4                              = null
    id                                        = "projects/az-537298/global/networks/petclinic-vpc"
    internal_ipv6_range                       = null
    mtu                                       = 0
    name                                      = "petclinic-vpc"
    network_firewall_policy_enforcement_order = "AFTER_CLASSIC_FIREWALL"
    numeric_id                                = "6425878025530408833"
    project                                   = "az-537298"
    routing_mode                              = "REGIONAL"
    self_link                                 = "https://www.googleapis.com/compute/v1/projects/az-537298/global/networks/petclinic-vpc"
}

# google_compute_region_backend_service.petclinic_backend:
resource "google_compute_region_backend_service" "petclinic_backend" {
    affinity_cookie_ttl_sec         = 0
    connection_draining_timeout_sec = 10
    creation_timestamp              = "2024-10-22T08:15:07.388-07:00"
    description                     = null
    enable_cdn                      = false
    fingerprint                     = "9Sch9jXMOMg="
    generated_id                    = 233000973901660052
    health_checks                   = [
        "https://www.googleapis.com/compute/v1/projects/az-537298/global/healthChecks/petclinic-health-check",
    ]
    id                              = "projects/az-537298/regions/us-central1/backendServices/petclinic-backend"
    load_balancing_scheme           = "INTERNAL"
    locality_lb_policy              = null
    name                            = "petclinic-backend"
    network                         = null
    port_name                       = null
    project                         = "az-537298"
    protocol                        = "TCP"
    region                          = "us-central1"
    self_link                       = "https://www.googleapis.com/compute/v1/projects/az-537298/regions/us-central1/backendServices/petclinic-backend"
    session_affinity                = "CLIENT_IP"
    timeout_sec                     = 30
}

# google_compute_router.pc_router:
resource "google_compute_router" "pc_router" {
    creation_timestamp            = "2024-10-22T08:15:51.827-07:00"
    description                   = null
    encrypted_interconnect_router = false
    id                            = "projects/az-537298/regions/us-central1/routers/petclinic-router"
    name                          = "petclinic-router"
    network                       = "https://www.googleapis.com/compute/v1/projects/az-537298/global/networks/petclinic-vpc"
    project                       = "az-537298"
    region                        = "us-central1"
    self_link                     = "https://www.googleapis.com/compute/v1/projects/az-537298/regions/us-central1/routers/petclinic-router"
}

# google_compute_router_nat.pc_nat_gateway:
resource "google_compute_router_nat" "pc_nat_gateway" {
    auto_network_tier                   = "PREMIUM"
    drain_nat_ips                       = []
    enable_dynamic_port_allocation      = false
    enable_endpoint_independent_mapping = false
    endpoint_types                      = [
        "ENDPOINT_TYPE_VM",
    ]
    icmp_idle_timeout_sec               = 30
    id                                  = "az-537298/us-central1/petclinic-router/pc-nat-gateway"
    max_ports_per_vm                    = 0
    min_ports_per_vm                    = 0
    name                                = "pc-nat-gateway"
    nat_ip_allocate_option              = "AUTO_ONLY"
    nat_ips                             = []
    project                             = "az-537298"
    region                              = "us-central1"
    router                              = "petclinic-router"
    source_subnetwork_ip_ranges_to_nat  = "ALL_SUBNETWORKS_ALL_IP_RANGES"
    tcp_established_idle_timeout_sec    = 1200
    tcp_time_wait_timeout_sec           = 120
    tcp_transitory_idle_timeout_sec     = 30
    udp_idle_timeout_sec                = 30

    log_config {
        enable = false
        filter = "ERRORS_ONLY"
    }
}

# google_compute_subnetwork.pc_subnet:
resource "google_compute_subnetwork" "pc_subnet" {
    creation_timestamp         = "2024-10-22T08:15:17.735-07:00"
    description                = null
    external_ipv6_prefix       = null
    gateway_address            = "10.0.1.1"
    id                         = "projects/az-537298/regions/us-central1/subnetworks/pc-subnet"
    internal_ipv6_prefix       = null
    ip_cidr_range              = "10.0.1.0/24"
    ipv6_access_type           = null
    ipv6_cidr_range            = null
    name                       = "pc-subnet"
    network                    = "https://www.googleapis.com/compute/v1/projects/az-537298/global/networks/petclinic-vpc"
    private_ip_google_access   = false
    private_ipv6_google_access = "DISABLE_GOOGLE_ACCESS"
    project                    = "az-537298"
    purpose                    = "PRIVATE"
    region                     = "us-central1"
    reserved_internal_range    = null
    role                       = null
    self_link                  = "https://www.googleapis.com/compute/v1/projects/az-537298/regions/us-central1/subnetworks/pc-subnet"
    stack_type                 = "IPV4_ONLY"
}

# google_compute_subnetwork.sql_subnet:
resource "google_compute_subnetwork" "sql_subnet" {
    creation_timestamp         = "2024-10-22T08:15:17.614-07:00"
    description                = null
    external_ipv6_prefix       = null
    gateway_address            = "10.0.2.1"
    id                         = "projects/az-537298/regions/us-central1/subnetworks/mysql-subnet"
    internal_ipv6_prefix       = null
    ip_cidr_range              = "10.0.2.0/24"
    ipv6_access_type           = null
    ipv6_cidr_range            = null
    name                       = "mysql-subnet"
    network                    = "https://www.googleapis.com/compute/v1/projects/az-537298/global/networks/petclinic-vpc"
    private_ip_google_access   = false
    private_ipv6_google_access = "DISABLE_GOOGLE_ACCESS"
    project                    = "az-537298"
    purpose                    = "PRIVATE"
    region                     = "us-central1"
    reserved_internal_range    = null
    role                       = null
    self_link                  = "https://www.googleapis.com/compute/v1/projects/az-537298/regions/us-central1/subnetworks/mysql-subnet"
    stack_type                 = "IPV4_ONLY"
}

# google_compute_target_pool.pc_pool:
resource "google_compute_target_pool" "pc_pool" {
    backup_pool      = null
    description      = null
    failover_ratio   = 0
    health_checks    = []
    id               = "projects/az-537298/regions/us-central1/targetPools/petclinic-pool"
    instances        = []
    name             = "petclinic-pool"
    project          = "az-537298"
    region           = "us-central1"
    self_link        = "https://www.googleapis.com/compute/v1/projects/az-537298/regions/us-central1/targetPools/petclinic-pool"
    session_affinity = "NONE"
}


# module.database.google_compute_instance.sql_srv:
resource "google_compute_instance" "sql_srv" {
    allow_stopping_for_update = true
    can_ip_forward            = false
    cpu_platform              = "Intel Broadwell"
    current_status            = "RUNNING"
    deletion_protection       = false
    description               = null
    effective_labels          = {
        "app"                        = "petclinic"
        "goog-terraform-provisioned" = "true"
    }
    enable_display            = false
    hostname                  = null
    id                        = "projects/az-537298/zones/us-central1-c/instances/mysql-server"
    instance_id               = "4395056482542583069"
    label_fingerprint         = "4C3Bo8rgZOc="
    labels                    = {
        "app" = "petclinic"
    }
    machine_type              = "e2-micro"
    metadata_fingerprint      = "aGbriGBxydU="
    min_cpu_platform          = null
    name                      = "mysql-server"
    project                   = "az-537298"
    self_link                 = "https://www.googleapis.com/compute/v1/projects/az-537298/zones/us-central1-c/instances/mysql-server"
    tags                      = [
        "db-server",
        "mysql-server",
        "mysqlserver-firewall",
    ]
    tags_fingerprint          = "Q2Ksn8gE9kA="
    terraform_labels          = {
        "app"                        = "petclinic"
        "goog-terraform-provisioned" = "true"
    }
    zone                      = "us-central1-c"

    boot_disk {
        auto_delete                = true
        device_name                = "persistent-disk-0"
        disk_encryption_key_raw    = (sensitive value)
        disk_encryption_key_sha256 = null
        interface                  = null
        kms_key_self_link          = null
        mode                       = "READ_WRITE"
        source                     = "https://www.googleapis.com/compute/v1/projects/az-537298/zones/us-central1-c/disks/mysql-server"

        initialize_params {
            enable_confidential_compute = false
            image                       = "https://www.googleapis.com/compute/v1/projects/az-537298/global/images/mysqlserver-image"
            labels                      = {}
            provisioned_iops            = 0
            provisioned_throughput      = 0
            size                        = 10
            storage_pool                = null
            type                        = "pd-standard"
        }
    }

    network_interface {
        internal_ipv6_prefix_length = 0
        ipv6_access_type            = null
        ipv6_address                = null
        name                        = "nic0"
        network                     = "https://www.googleapis.com/compute/v1/projects/az-537298/global/networks/petclinic-vpc"
        network_ip                  = "10.0.2.2"
        nic_type                    = null
        queue_count                 = 0
        stack_type                  = "IPV4_ONLY"
        subnetwork                  = "https://www.googleapis.com/compute/v1/projects/az-537298/regions/us-central1/subnetworks/mysql-subnet"
        subnetwork_project          = "az-537298"
    }

    scheduling {
        automatic_restart           = true
        instance_termination_action = null
        min_node_cpus               = 0
        on_host_maintenance         = "MIGRATE"
        preemptible                 = false
        provisioning_model          = "STANDARD"
    }

    service_account {
        email  = "azrubael@az-537298.iam.gserviceaccount.com"
        scopes = [
            "https://www.googleapis.com/auth/devstorage.read_only",
            "https://www.googleapis.com/auth/logging.write",
            "https://www.googleapis.com/auth/monitoring.write",
            "https://www.googleapis.com/auth/service.management.readonly",
            "https://www.googleapis.com/auth/servicecontrol",
            "https://www.googleapis.com/auth/trace.append",
        ]
    }

    shielded_instance_config {
        enable_integrity_monitoring = true
        enable_secure_boot          = false
        enable_vtpm                 = true
    }
}


# module.firewall.google_compute_firewall.allow_mysql_from_petclinic:
resource "google_compute_firewall" "allow_mysql_from_petclinic" {
    creation_timestamp      = "2024-10-22T08:15:17.232-07:00"
    description             = null
    destination_ranges      = []
    direction               = "INGRESS"
    disabled                = false
    id                      = "projects/az-537298/global/firewalls/allow-mysql-from-petclinic"
    name                    = "allow-mysql-from-petclinic"
    network                 = "https://www.googleapis.com/compute/v1/projects/az-537298/global/networks/petclinic-vpc"
    priority                = 1000
    project                 = "az-537298"
    self_link               = "https://www.googleapis.com/compute/v1/projects/az-537298/global/firewalls/allow-mysql-from-petclinic"
    source_ranges           = [
        "10.0.1.0/24",
    ]
    source_service_accounts = []
    source_tags             = []
    target_service_accounts = []
    target_tags             = [
        "mysqlserver-firewall",
    ]

    allow {
        ports    = [
            "3306",
        ]
        protocol = "tcp"
    }
}

# module.firewall.google_compute_firewall.allow_petclinic_from_internet:
resource "google_compute_firewall" "allow_petclinic_from_internet" {
    creation_timestamp      = "2024-10-22T08:15:17.145-07:00"
    description             = null
    destination_ranges      = []
    direction               = "INGRESS"
    disabled                = false
    id                      = "projects/az-537298/global/firewalls/allow-petclinic-from-internet"
    name                    = "allow-petclinic-from-internet"
    network                 = "https://www.googleapis.com/compute/v1/projects/az-537298/global/networks/petclinic-vpc"
    priority                = 1000
    project                 = "az-537298"
    self_link               = "https://www.googleapis.com/compute/v1/projects/az-537298/global/firewalls/allow-petclinic-from-internet"
    source_ranges           = [
        "0.0.0.0/0",
    ]
    source_service_accounts = []
    source_tags             = []
    target_service_accounts = []
    target_tags             = [
        "petclinic-firewall",
    ]

    allow {
        ports    = [
            "8080",
        ]
        protocol = "tcp"
    }
}

# module.firewall.google_compute_firewall.allow_ssh_from_internet:
resource "google_compute_firewall" "allow_ssh_from_internet" {
    creation_timestamp      = "2024-10-22T08:15:17.194-07:00"
    description             = null
    destination_ranges      = []
    direction               = "INGRESS"
    disabled                = false
    id                      = "projects/az-537298/global/firewalls/allow-ssh-from-internet"
    name                    = "allow-ssh-from-internet"
    network                 = "https://www.googleapis.com/compute/v1/projects/az-537298/global/networks/petclinic-vpc"
    priority                = 1000
    project                 = "az-537298"
    self_link               = "https://www.googleapis.com/compute/v1/projects/az-537298/global/firewalls/allow-ssh-from-internet"
    source_ranges           = [
        "0.0.0.0/0",
    ]
    source_service_accounts = []
    source_tags             = []
    target_service_accounts = []
    target_tags             = [
        "mysqlserver-firewall",
        "petclinic-firewall",
    ]

    allow {
        ports    = [
            "22",
        ]
        protocol = "tcp"
    }
    allow {
        ports    = []
        protocol = "icmp"
    }
}
